Executing (default): SELECT 1+1 AS result
Γ£à Database connection established successfully
≡ƒôè Connected to: smartpark@localhost:3306
Executing (default): SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_NAME = 'users' AND TABLE_SCHEMA = 'smartpark'
Executing (default): SHOW FULL COLUMNS FROM `users`;
Executing (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'users' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='smartpark' AND REFERENCED_TABLE_NAME IS NOT NULL;
Executing (default): ALTER TABLE `users` CHANGE `full_name` `full_name` VARCHAR(100) NOT NULL;
Executing (default): ALTER TABLE `users` CHANGE `email` `email` VARCHAR(100) NOT NULL UNIQUE;
Executing (default): ALTER TABLE `users` CHANGE `password_hash` `password_hash` VARCHAR(255) NOT NULL;
Executing (default): ALTER TABLE `users` CHANGE `phone` `phone` VARCHAR(20);
Executing (default): ALTER TABLE `users` CHANGE `role` `role` ENUM('admin', 'contractor', 'officer', 'viewer', 'user') NOT NULL DEFAULT 'viewer';
Executing (default): ALTER TABLE `users` CHANGE `status` `status` ENUM('active', 'inactive', 'suspended') NOT NULL DEFAULT 'active';
Executing (default): ALTER TABLE `users` CHANGE `created_at` `created_at` DATETIME NOT NULL;
Executing (default): ALTER TABLE `users` CHANGE `updated_at` `updated_at` DATETIME NOT NULL;
Executing (default): ALTER TABLE `users` CHANGE `username` `username` VARCHAR(50) NOT NULL UNIQUE;
Executing (default): ALTER TABLE `users` CHANGE `last_login` `last_login` DATETIME;
Executing (default): SHOW INDEX FROM `users`
Executing (default): SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_NAME = 'parking_zones' AND TABLE_SCHEMA = 'smartpark'
Executing (default): SHOW FULL COLUMNS FROM `parking_zones`;
Executing (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'parking_zones' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='smartpark' AND REFERENCED_TABLE_NAME IS NOT NULL;
Executing (default): ALTER TABLE `parking_zones` CHANGE `address` `address` VARCHAR(255) NOT NULL;
Executing (default): ALTER TABLE `parking_zones` CHANGE `latitude` `latitude` DECIMAL(10,7) NOT NULL;
Executing (default): ALTER TABLE `parking_zones` CHANGE `longitude` `longitude` DECIMAL(10,7) NOT NULL;
Executing (default): ALTER TABLE `parking_zones` CHANGE `created_at` `created_at` DATETIME NOT NULL;
Executing (default): ALTER TABLE `parking_zones` CHANGE `name` `name` VARCHAR(100) NOT NULL;
Executing (default): ALTER TABLE `parking_zones` CHANGE `total_capacity` `total_capacity` INTEGER NOT NULL;
Executing (default): ALTER TABLE `parking_zones` CHANGE `current_occupancy` `current_occupancy` INTEGER DEFAULT 0;
Executing (default): ALTER TABLE `parking_zones` CHANGE `contractor_limit` `contractor_limit` INTEGER;
Executing (default): ALTER TABLE `parking_zones` CHANGE `contractor_name` `contractor_name` VARCHAR(100);
Executing (default): ALTER TABLE `parking_zones` CHANGE `hourly_rate` `hourly_rate` DECIMAL(10,2) DEFAULT 50;
Executing (default): ALTER TABLE `parking_zones` CHANGE `penalty_per_vehicle` `penalty_per_vehicle` DECIMAL(10,2) DEFAULT 500;
Executing (default): ALTER TABLE `parking_zones` CHANGE `operating_hours` `operating_hours` VARCHAR(50) DEFAULT '06:00 - 22:00';
Executing (default): ALTER TABLE `parking_zones` CHANGE `status` `status` ENUM('active', 'inactive', 'maintenance') DEFAULT 'active';
Executing (default): ALTER TABLE `parking_zones` CHANGE `updated_at` `updated_at` DATETIME NOT NULL;
Executing (default): SHOW INDEX FROM `parking_zones`
Executing (default): SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_NAME = 'parking_slots' AND TABLE_SCHEMA = 'smartpark'
Executing (default): SHOW FULL COLUMNS FROM `parking_slots`;
Executing (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'parking_slots' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='smartpark' AND REFERENCED_TABLE_NAME IS NOT NULL;
Executing (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='parking_slots' AND constraint_name = 'parking_slots_ibfk_1' AND TABLE_SCHEMA = 'smartpark';
Executing (default): ALTER TABLE `parking_slots` DROP FOREIGN KEY `parking_slots_ibfk_1`;
Executing (default): ALTER TABLE `parking_slots` ADD FOREIGN KEY (`zone_id`) REFERENCES `parking_zones` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE `parking_slots` CHANGE `slot_number` `slot_number` VARCHAR(20) NOT NULL;
Executing (default): ALTER TABLE `parking_slots` CHANGE `slot_type` `slot_type` ENUM('car', 'bike', 'ev', 'disabled') DEFAULT 'car';
Executing (default): ALTER TABLE `parking_slots` CHANGE `status` `status` ENUM('available', 'occupied', 'maintenance') NOT NULL DEFAULT 'available';
Executing (default): SHOW INDEX FROM `parking_slots`
Executing (default): SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_NAME = 'bookings' AND TABLE_SCHEMA = 'smartpark'
Executing (default): SHOW FULL COLUMNS FROM `bookings`;
Executing (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'bookings' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='smartpark' AND REFERENCED_TABLE_NAME IS NOT NULL;
Executing (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='bookings' AND constraint_name = 'bookings_ibfk_9' AND TABLE_SCHEMA = 'smartpark';
Executing (default): ALTER TABLE `bookings` DROP FOREIGN KEY `bookings_ibfk_9`;
Executing (default): ALTER TABLE `bookings` ADD FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='bookings' AND constraint_name = 'bookings_ibfk_10' AND TABLE_SCHEMA = 'smartpark';
Executing (default): ALTER TABLE `bookings` DROP FOREIGN KEY `bookings_ibfk_10`;
Executing (default): ALTER TABLE `bookings` ADD FOREIGN KEY (`slot_id`) REFERENCES `parking_slots` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE `bookings` CHANGE `booking_start` `booking_start` DATETIME NOT NULL;
Executing (default): ALTER TABLE `bookings` CHANGE `booking_end` `booking_end` DATETIME NOT NULL;
Executing (default): ALTER TABLE `bookings` CHANGE `booking_type` `booking_type` ENUM('hourly', 'daily', 'monthly', 'yearly') DEFAULT 'hourly';
Executing (default): ALTER TABLE `bookings` CHANGE `status` `status` ENUM('active', 'completed', 'cancelled', 'expired') NOT NULL DEFAULT 'active';
Executing (default): ALTER TABLE `bookings` CHANGE `created_at` `created_at` DATETIME;
Executing (default): SHOW INDEX FROM `bookings`
Executing (default): SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_NAME = 'violations' AND TABLE_SCHEMA = 'smartpark'
Executing (default): CREATE TABLE IF NOT EXISTS `violations` (`id` INTEGER auto_increment , `zone_id` INTEGER NOT NULL, `severity` ENUM('warning', 'critical') NOT NULL, `excess_vehicles` INTEGER NOT NULL, `penalty_amount` DECIMAL(10,2) NOT NULL, `timestamp` DATETIME, `resolved` TINYINT(1) DEFAULT false, `resolved_at` DATETIME, `notes` TEXT, `auto_generated` TINYINT(1) DEFAULT true, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`zone_id`) REFERENCES `parking_zones` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
Executing (default): CREATE TABLE IF NOT EXISTS `violations` (`id` INTEGER auto_increment , `zone_id` INTEGER NOT NULL, `severity` ENUM('warning', 'critical') NOT NULL, `excess_vehicles` INTEGER NOT NULL, `penalty_amount` DECIMAL(10,2) NOT NULL, `timestamp` DATETIME, `resolved` TINYINT(1) DEFAULT false, `resolved_at` DATETIME, `notes` TEXT, `auto_generated` TINYINT(1) DEFAULT true, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`zone_id`) REFERENCES `parking_zones` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
Executing (default): CREATE TABLE IF NOT EXISTS `violations` (`id` INTEGER auto_increment , `zone_id` INTEGER NOT NULL, `severity` ENUM('warning', 'critical') NOT NULL, `excess_vehicles` INTEGER NOT NULL, `penalty_amount` DECIMAL(10,2) NOT NULL, `timestamp` DATETIME, `resolved` TINYINT(1) DEFAULT false, `resolved_at` DATETIME, `notes` TEXT, `auto_generated` TINYINT(1) DEFAULT true, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`zone_id`) REFERENCES `parking_zones` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
Γ¥î Error starting server: Error
    at Query.run (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\sequelize\lib\dialects\mysql\query.js:52:25)
    at C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\sequelize\lib\sequelize.js:315:28
    at async MySQLQueryInterface.createTable (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\sequelize\lib\dialects\abstract\query-interface.js:98:12)
    at async Violation.sync (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\sequelize\lib\model.js:942:7)
    at async Sequelize.sync (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\sequelize\lib\sequelize.js:377:9)
    at async startServer (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\src\server.js:31:7) {
  name: 'SequelizeDatabaseError',
  parent: Error: Referencing column 'zone_id' and referenced column 'id' in foreign key constraint 'violations_ibfk_1' are incompatible.
      at Packet.asError (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\mysql2\lib\packets\packet.js:740:17)
      at Query.execute (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\mysql2\lib\commands\command.js:29:26)
      at Connection.handlePacket (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\mysql2\lib\base\connection.js:508:34)
      at PacketParser.onPacket (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\mysql2\lib\base\connection.js:93:12)
      at PacketParser.executeStart (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\mysql2\lib\packet_parser.js:75:16)
      at Socket.<anonymous> (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\mysql2\lib\base\connection.js:100:25)
      at Socket.emit (node:events:508:28)
      at addChunk (node:internal/streams/readable:559:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
      at Readable.push (node:internal/streams/readable:390:5) {
    code: 'ER_FK_INCOMPATIBLE_COLUMNS',
    errno: 3780,
    sqlState: 'HY000',
    sqlMessage: "Referencing column 'zone_id' and referenced column 'id' in foreign key constraint 'violations_ibfk_1' are incompatible.",
    sql: "CREATE TABLE IF NOT EXISTS `violations` (`id` INTEGER auto_increment , `zone_id` INTEGER NOT NULL, `severity` ENUM('warning', 'critical') NOT NULL, `excess_vehicles` INTEGER NOT NULL, `penalty_amount` DECIMAL(10,2) NOT NULL, `timestamp` DATETIME, `resolved` TINYINT(1) DEFAULT false, `resolved_at` DATETIME, `notes` TEXT, `auto_generated` TINYINT(1) DEFAULT true, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`zone_id`) REFERENCES `parking_zones` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;",
    parameters: undefined
  },
  original: Error: Referencing column 'zone_id' and referenced column 'id' in foreign key constraint 'violations_ibfk_1' are incompatible.
      at Packet.asError (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\mysql2\lib\packets\packet.js:740:17)
      at Query.execute (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\mysql2\lib\commands\command.js:29:26)
      at Connection.handlePacket (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\mysql2\lib\base\connection.js:508:34)
      at PacketParser.onPacket (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\mysql2\lib\base\connection.js:93:12)
      at PacketParser.executeStart (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\mysql2\lib\packet_parser.js:75:16)
      at Socket.<anonymous> (C:\Users\AAKASH\OneDrive\Desktop\folder12\backend\node_modules\mysql2\lib\base\connection.js:100:25)
      at Socket.emit (node:events:508:28)
      at addChunk (node:internal/streams/readable:559:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
      at Readable.push (node:internal/streams/readable:390:5) {
    code: 'ER_FK_INCOMPATIBLE_COLUMNS',
    errno: 3780,
    sqlState: 'HY000',
    sqlMessage: "Referencing column 'zone_id' and referenced column 'id' in foreign key constraint 'violations_ibfk_1' are incompatible.",
    sql: "CREATE TABLE IF NOT EXISTS `violations` (`id` INTEGER auto_increment , `zone_id` INTEGER NOT NULL, `severity` ENUM('warning', 'critical') NOT NULL, `excess_vehicles` INTEGER NOT NULL, `penalty_amount` DECIMAL(10,2) NOT NULL, `timestamp` DATETIME, `resolved` TINYINT(1) DEFAULT false, `resolved_at` DATETIME, `notes` TEXT, `auto_generated` TINYINT(1) DEFAULT true, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`zone_id`) REFERENCES `parking_zones` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;",
    parameters: undefined
  },
  sql: "CREATE TABLE IF NOT EXISTS `violations` (`id` INTEGER auto_increment , `zone_id` INTEGER NOT NULL, `severity` ENUM('warning', 'critical') NOT NULL, `excess_vehicles` INTEGER NOT NULL, `penalty_amount` DECIMAL(10,2) NOT NULL, `timestamp` DATETIME, `resolved` TINYINT(1) DEFAULT false, `resolved_at` DATETIME, `notes` TEXT, `auto_generated` TINYINT(1) DEFAULT true, `created_at` DATETIME NOT NULL, `updated_at` DATETIME NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`zone_id`) REFERENCES `parking_zones` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;",
  parameters: {}
}
